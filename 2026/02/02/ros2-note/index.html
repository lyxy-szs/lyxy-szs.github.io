<!DOCTYPE html>
<html lang="zh-CN">

<head><!-- hexo injector head_begin start --><link href="https://fastly.jsdelivr.net/npm/hexo-tag-common@0.2.0/css/index.css" rel="stylesheet"/><!-- hexo injector head_begin end -->
    <script src="https://cdn.bootcss.com/typed.js/2.0.5/typed.js"></script>
    <!-- �ַ��������ӿ����� -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<!-- վ��Ԫ��Ϣ -->

    <meta name="author" content="Lyxy-szs">


    <meta name="subtitle" content="Shi">




<!-- ҳ����⶯̬���� -->

<title>ros2_note | Johnson</title>

<!-- ��վͼ�� -->

    <link rel="icon" href="/2.ico">


<!-- �Զ���CSS�б������������ü��أ� -->

    
    <link rel="stylesheet" href="/css/style.css">
    


<!-- �Զ���JS�б������������ü��أ� -->

    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    
    <script src="/js/tellu.js"></script>
    
    <script src="/js/typed.min.js"></script>
    


<!-- MathJax��ʽ��Ⱦ֧�� -->

    

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const pagebody = document.getElementsByTagName('body')[0]

            function setTheme(status) {

                if (status === 'dark') {
                    window.sessionStorage.theme = 'dark'
                    pagebody.classList.add('dark-theme');

                } else if (status === 'light') {
                    window.sessionStorage.theme = 'light'
                    pagebody.classList.remove('dark-theme');
                }
            };

            setTheme(window.sessionStorage.theme)
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Johnson&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                <a class="menu-item" href="/archives">文章</a>
                
                <a class="menu-item" href="/categories">类别</a>
                
                <a class="menu-item" href="/tags">标签</a>
                
                <a class="menu-item" href="/links">友链</a>
                
                <a class="menu-item" href="/downloads">下载</a>
                
                
                <!-- 桌面端搜索按钮 -->
                <button class="search-btn menu-item" style="
                    background: transparent; 
                    border: none; 
                    cursor: pointer; 
                    font-size: inherit; 
                    color: inherit;
                    padding: 0 10px;
                ">
                    搜索
                </button>

                <!-- 恢复默认主题切换结构 -->
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <!-- 恢复默认结构：&nbsp;改为空格 -->
                    <a href="/">Johnson&#39;s Blog</a><a id="mobile-toggle-theme">· Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">
                    <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M4.5 17.27q-.213 0-.356-.145T4 16.768t.144-.356t.356-.143h15q.213 0 .356.144q.144.144.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.144T4 11.999t.144-.356t.356-.143h15q.213 0 .356.144t.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.143Q4 7.443 4 7.23t.144-.356t.356-.143h15q.213 0 .356.144T20 7.23t-.144.356t-.356.144z"/></svg>
                    <svg class="close-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"/></svg>
                </div>
            </div>
            <div class="menu" id="mobile-menu">
                
                <a class="menu-item" href="/archives">文章</a>
                
                <a class="menu-item" href="/categories">类别</a>
                
                <a class="menu-item" href="/tags">标签</a>
                
                <a class="menu-item" href="/links">友链</a>
                
                <a class="menu-item" href="/downloads">下载</a>
                

                <!-- 移动端搜索按钮 -->
                <button class="search-btn menu-item" style="
                    background: transparent; 
                    border: none; 
                    cursor: pointer; 
                    font-size: inherit; 
                    color: inherit;
                    padding: 10px 0;
                    width: 100%;
                    text-align: left;
                ">
                    搜索
                </button>
            </div>
        </div>
    </nav>

</header>

<div id="searchModal" style="
    display: none; 
    position: fixed; 
    top: 20%; 
    left: 50%; 
    transform: translateX(-50%); 
    background: transparent; 
    backdrop-filter: blur(8px); 
    -webkit-backdrop-filter: blur(8px); 
    padding: 20px; 
    border-radius: 12px; 
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15); 
    z-index: 9999; 
    width: 80%; 
    max-width: 500px;
    border: 1px solid rgba(255, 255, 255, 0.1);
">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h3 id="searchTitle" style="margin: 0; font-size: 16px;">搜索文章</h3>
        <span class="search-close" style="cursor: pointer; font-size: 20px;">&times;</span>
    </div>
    <input type="text" id="searchInput" placeholder="输入关键词搜索..." style="
        width: 100%; 
        padding: 12px; 
        border: 1px solid #eee; 
        border-radius: 8px; 
        font-size: 14px;
        outline: none;
        box-sizing: border-box;
    ">
    <ul id="searchResult" style="list-style: none; padding: 0; margin-top: 15px; max-height: 300px; overflow-y: auto;"></ul>
</div>

<!-- 主题适配样式（优化搜索结果上下文和输入框样式） -->
<!-- 主题适配样式（优化搜索结果上下文和输入框样式） -->
<style>
    /* 白主题样式 - 搜索框和文字 */
    #searchTitle,
    #searchInput {
        color: #333 !important;
    }
    .search-close {
        color: #999 !important;
    }
    #searchInput {
        background: rgba(255, 255, 255, 0.85) !important;
        border-color: #ddd !important;
        color: #333 !important;
    }
    #searchResult li {
        border-bottom: 1px dashed #eee !important;
    }
    #searchInput::placeholder {
        color: #999 !important;
    }

    /* 搜索结果链接（文章名）样式 */
    #searchResult a {
        text-decoration: none;
        font-weight: 500;
        display: block;
        color: #333; /* 白主题下的文章名颜色 */
    }
    
    body.dark #searchResult a,
    body.dark-theme #searchResult a {
        color: #fff; /* 深色主题下的文章名颜色 */
    }

    /* 黑主题样式 - 搜索框和文字 */
    body.dark #searchTitle,
    body.dark-theme #searchTitle,
    body.dark #searchInput,
    body.dark-theme #searchInput {
        color: #fff !important;
    }
    body.dark .search-close,
    body.dark-theme .search-close {
        color: #ccc !important;
    }
    body.dark #searchInput,
    body.dark-theme #searchInput {
        background: rgba(50, 50, 50, 0.85) !important;
        border-color: #666 !important;
        color: #fff !important;
    }
    body.dark #searchResult li,
    body.dark-theme #searchResult li {
        border-bottom: 1px dashed #555 !important;
    }
    body.dark #searchInput::placeholder,
    body.dark-theme #searchInput::placeholder {
        color: #aaa !important;
    }

    /* 修改：搜索结果上下文样式 - 使用与文章名相同的颜色 */
    .search-context {
        display: block;
        font-size: 13px;
        margin-top: 6px;
        line-height: 1.5;
        height: 39px;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        word-break: break-all;
        color: #333; /* 默认使用与文章名相同的浅色主题颜色 */
    }
    
    /* 深色主题下上下文使用与文章名相同的颜色 */
    body.dark .search-context,
    body.dark-theme .search-context {
        color: #fff; /* 使用与深色主题文章名相同的颜色 */
    }
    
    /* 保留关键词高亮样式 */
    .search-context mark {
        background-color: rgba(255, 215, 0, 0.3);
        color: inherit; /* 继承父元素的颜色 */
        padding: 0 2px;
        border-radius: 2px;
        font-weight: bold;
    }
    
    /* 深色主题下的关键词高亮 */
    body.dark .search-context mark,
    body.dark-theme .search-context mark {
        background-color: rgba(255, 215, 0, 0.4);
        color: #fff; /* 深色主题下mark标签文字颜色 */
    }

    /* ========== 搜索结果滚动条主题适配 ========== */
    /* 1. 白主题滚动条（默认） */
    #searchResult {
        scrollbar-width: thin;
        scrollbar-color: #ccc #f5f5f5;
    }
    
    /* 滚动条整体宽度 */
    #searchResult::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }
    
    /* 滚动条轨道 */
    #searchResult::-webkit-scrollbar-track {
        background: #f5f5f5;
        border-radius: 3px;
    }
    
    /* 滚动条滑块 */
    #searchResult::-webkit-scrollbar-thumb {
        background: #ccc;
        border-radius: 3px;
    }
    
    /* 滑块hover状态 */
    #searchResult::-webkit-scrollbar-thumb:hover {
        background: #999;
    }

    /* 2. 黑主题滚动条 */
    body.dark #searchResult,
    body.dark-theme #searchResult {
        scrollbar-width: thin;
        scrollbar-color: #666 #333;
    }
    
    body.dark #searchResult::-webkit-scrollbar-track,
    body.dark-theme #searchResult::-webkit-scrollbar-track {
        background: #333;
    }
    
    body.dark #searchResult::-webkit-scrollbar-thumb,
    body.dark-theme #searchResult::-webkit-scrollbar-thumb {
        background: #666;
    }
    
    body.dark #searchResult::-webkit-scrollbar-thumb:hover,
    body.dark-theme #searchResult::-webkit-scrollbar-thumb:hover {
        background: #888;
    }

    /* 3. 搜索结果项目样式 */
    #searchResult li {
        padding: 12px 0;
        border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    
    body.dark #searchResult li,
    body.dark-theme #searchResult li {
        border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    
    /* 文章链接悬停效果 */
    #searchResult a:hover {
        text-decoration: underline;
    }
</style>

<!-- 引入jQuery和搜索逻辑JS -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
<script>
    // 移动菜单切换函数（保持不变）
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.classList.contains("active")) {
            toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        } else {
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }

    // 搜索功能逻辑（增加上下文提取功能）
    $(document).ready(function () {
        const $searchBtn = $('.search-btn');
        const $searchModal = $('#searchModal');
        const $searchInput = $('#searchInput');
        const $searchResult = $('#searchResult');

        // 显示/隐藏搜索框（保持不变）
        $searchBtn.click(function (e) {
            e.preventDefault();
            $searchModal.toggle();
            if ($searchModal.is(':visible')) {
                $searchInput.focus();
            } else {
                $searchInput.val('');
                $searchResult.empty();
            }
        });

        // 关闭搜索框（保持不变）
        $('.search-close').click(function () {
            $searchModal.hide();
            $searchInput.val('');
            $searchResult.empty();
        });

        // 点击外部关闭（保持不变）
        $(document).click(function (e) {
            if (
                !$searchModal.is(e.target) && 
                !$searchModal.has(e.target).length && 
                !$searchBtn.is(e.target)
            ) {
                $searchModal.hide();
                $searchInput.val('');
                $searchResult.empty();
            }
        });

        // 从文本中提取关键词上下文（优化版）
        function extractContext(text, keyword, maxLength = 150) {
            if (!text || !keyword) return '';
            
            // 将文本和关键词都转为小写进行匹配
            const lowerText = text.toLowerCase();
            const lowerKeyword = keyword.toLowerCase();
            
            // 查找关键词在文本中的位置
            const index = lowerText.indexOf(lowerKeyword);
            
            if (index === -1) {
                // 如果没有找到关键词，返回文本开头部分
                const shortText = text.substring(0, maxLength);
                return shortText + (text.length > maxLength ? '...' : '');
            }
            
            // 计算截取范围：关键词前后各取一半
            const start = Math.max(0, index - maxLength / 2);
            const end = Math.min(text.length, index + keyword.length + maxLength / 2);
            
            let context = text.substring(start, end);
            
            // 在开头和结尾添加省略号
            if (start > 0) context = '...' + context;
            if (end < text.length) context = context + '...';
            
            // 高亮关键词（保持原始大小写）
            const originalKeyword = text.substring(index, index + keyword.length);
            const regex = new RegExp(originalKeyword.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi');
            
            return context.replace(regex, match => `<mark>${match}</mark>`);
        }

        // 去除HTML标签，获取纯文本
        function stripHtml(html) {
            const tmp = document.createElement('div');
            tmp.innerHTML = html;
            return tmp.textContent || tmp.innerText || '';
        }

        // 关键词搜索（显示带上下文的搜索结果）
        $searchInput.on('input', function () {
            const searchText = $(this).val().trim().toLowerCase();
            $searchResult.empty();

            if (searchText.length < 2) return;

            $.get('/search.xml', function (xml) {
                let hasMatch = false;
                $(xml).find('entry').each(function () {
                    const $entry = $(this);
                    const title = $entry.find('title').text();
                    const link = $entry.find('url').text();
                    const rawContent = $entry.find('content').text();
                    const content = stripHtml(rawContent);
                    
                    // 搜索标题和内容
                    const titleMatch = title.toLowerCase().includes(searchText);
                    const contentMatch = content.toLowerCase().includes(searchText);
                    
                    if (titleMatch || contentMatch) {
                        // 提取上下文
                        let context = '';
                        if (contentMatch) {
                            context = extractContext(content, searchText, 150);
                        } else if (titleMatch) {
                            // 如果只是标题匹配，高亮标题中的关键词
                            const titleContext = title.replace(
                                new RegExp(searchText, 'gi'), 
                                match => `<mark>${match}</mark>`
                            );
                            context = `标题匹配: ${titleContext}`;
                        }
                        
                        $searchResult.append(`
                            <li>
                                <a href="${link}?keyword=${encodeURIComponent(searchText)}" target="_blank">
                                    ${title}
                                </a>
                                <span class="search-context">${context}</span>
                            </li>
                        `);
                        hasMatch = true;
                    }
                });

                if (!hasMatch) {
                    $searchResult.append(`
                        <li style="padding: 10px; text-align: center; color: #888;">
                            未找到包含"${searchText}"的文章
                        </li>
                    `);
                }
            }).fail(function () {
                $searchResult.append(`
                    <li style="padding: 10px; color: #f44336; text-align: center;">
                        搜索索引加载失败，请确保已生成search.xml
                    </li>
                `);
            });
        });
    });
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // 为 6 时展开所有
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">ros2_note</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Lyxy-szs</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">二月 2, 2026&nbsp;&nbsp;9:48:08</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="VScode"><a href="#VScode" class="headerlink" title="VScode"></a><strong>VScode</strong></h1><p><em><strong>首先，</strong></em> 先把VScode自动保存打开！！！<br>这样会减少很多的报错<br><img src="/images/ros_node/r-0.png" alt="r-0" width="800" /></p>
<h1 id="指令："><a href="#指令：" class="headerlink" title="指令："></a>指令：</h1><details>
<summary> 基础 </summary>

<h2 id="召唤吉祥物"><a href="#召唤吉祥物" class="headerlink" title="召唤吉祥物"></a>召唤吉祥物</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ros2 run turtlesim turtlesim_node</span><br></pre></td></tr></table></figure>
<img src="/images/ros_node/r-1.1.png" alt="r-1.1" width="500" />

<h2 id="查看服务列表，会显示服务类型及消息接口"><a href="#查看服务列表，会显示服务类型及消息接口" class="headerlink" title="查看服务列表，会显示服务类型及消息接口"></a>查看服务列表，会显示服务类型及消息接口</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ros2 service list -t</span><br><span class="line"><span class="comment">#eg：/spawn[turtlesim/srv/Spawn],spawn是“产卵”，生成新的海龟</span></span><br></pre></td></tr></table></figure>
<h2 id="查看消息接口"><a href="#查看消息接口" class="headerlink" title="查看消息接口"></a>查看消息接口</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ros2 interface show turtlesim/srv/Spawn <span class="comment">#在上一条命令后，[]内的内容是接口</span></span><br><span class="line"><span class="comment">#float32 x       32位浮点型保存横坐标</span></span><br><span class="line"><span class="comment">#float32 y       32位浮点型保存纵坐标</span></span><br><span class="line"><span class="comment">#float32 theta   32位浮点型保存头的朝向</span></span><br><span class="line"><span class="comment">#string name # Optional.  A unique name will be created and returned if this is empty</span></span><br><span class="line"><span class="comment">#---</span></span><br><span class="line"><span class="comment">#string name</span></span><br></pre></td></tr></table></figure>
<h2 id="终端调用消息接口-召唤第二只乌龟"><a href="#终端调用消息接口-召唤第二只乌龟" class="headerlink" title="终端调用消息接口(召唤第二只乌龟)"></a>终端调用消息接口(召唤第二只乌龟)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ros2 service call /spawn turtlesim/srv/Spawn <span class="string">&quot;&#123;x: 1,y: 2&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#格式： ros2 service call 服务名字 服务接口 &quot;&#123;数据填充（yaml格式）&#125;&quot;</span></span><br></pre></td></tr></table></figure>

<details>
<summary>示例反馈</summary>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">requester: making request: turtlesim.srv.Spawn_Request(x=1.0, y=2.0, theta=0.0, name=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">response:</span><br><span class="line">turtlesim.srv.Spawn_Response(name=<span class="string">&#x27;turtle2&#x27;</span>)</span><br></pre></td></tr></table></figure>
</details>

<img src="/images/ros_node/r-1.2.png" alt="r-1.2" width="500" />

<h2 id="可视化接口调用：rqt"><a href="#可视化接口调用：rqt" class="headerlink" title="可视化接口调用：rqt"></a>可视化接口调用：rqt</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rqt</span><br></pre></td></tr></table></figure>
<img src="/images/ros_node/r-2.png" alt="r-2" width="500" />
</details>

<h1 id="导-航-："><a href="#导-航-：" class="headerlink" title="导 航 ："></a>导 航 ：</h1><h2 id="创建环境："><a href="#创建环境：" class="headerlink" title="创建环境："></a>创建环境：</h2><h3 id="创建并进入文件夹"><a href="#创建并进入文件夹" class="headerlink" title="创建并进入文件夹"></a>创建并进入文件夹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> CHAPT6/chapt6_ws/src &amp;&amp; <span class="built_in">cd</span> CHAPT6/chapt6_ws/src</span><br></pre></td></tr></table></figure>

<h3 id="创建ros2环境"><a href="#创建ros2环境" class="headerlink" title="创建ros2环境"></a>创建ros2环境</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ros2 pkg create fishbot_description --build-type ament_cmake --license Apache-2.0</span><br></pre></td></tr></table></figure>

<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ros2</span> pkg       create  fishbot_description   --build-type  ament_cmake                    --license     Apache-<span class="number">2</span>.<span class="number">0</span></span><br><span class="line"><span class="attribute">ros2</span> 功能包操作  创建    fishbot_description   -- 构建类型     ROS <span class="number">2</span> 中基于 CMake 的标准构建方式 -- 开源许可证   Apache <span class="number">2</span>.<span class="number">0</span> 协议</span><br></pre></td></tr></table></figure>

<details>
<summary> 示例反馈： </summary>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">going to create a new package</span><br><span class="line">package name: fishbot_description</span><br><span class="line">destination directory: /home/noi/fishros/CHAPT6/chapt6_ws/src</span><br><span class="line">package format: 3</span><br><span class="line">version: 0.0.0</span><br><span class="line">description: TODO: Package description</span><br><span class="line">maintainer: [<span class="string">&#x27;noi &lt;example@example.com&gt;&#x27;</span>]</span><br><span class="line">licenses: [<span class="string">&#x27;Apache-2.0&#x27;</span>]</span><br><span class="line">build <span class="built_in">type</span>: ament_cmake</span><br><span class="line">dependencies: []</span><br><span class="line">creating folder ./fishbot_description</span><br><span class="line">creating ./fishbot_description/package.xml</span><br><span class="line">creating <span class="built_in">source</span> and include folder</span><br><span class="line">creating folder ./fishbot_description/src</span><br><span class="line">creating folder ./fishbot_description/include/fishbot_description</span><br><span class="line">creating ./fishbot_description/CMakeLists.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">└── CHAPT6</span><br><span class="line">    └── chapt6_ws</span><br><span class="line">        └── src</span><br><span class="line">            └── fishbot_description</span><br><span class="line">                ├── CMakeLists.txt</span><br><span class="line">                ├── include</span><br><span class="line">                │   └── fishbot_description</span><br><span class="line">                ├── LICENSE</span><br><span class="line">                ├── package.xml</span><br><span class="line">                ├── urdf</span><br><span class="line">                └── src</span><br><span class="line"></span><br><span class="line">7 directories, 3 files</span><br></pre></td></tr></table></figure>
</details>

<h2 id="机器人模型文件储存-——-urdf文件夹"><a href="#机器人模型文件储存-——-urdf文件夹" class="headerlink" title="机器人模型文件储存 —— urdf文件夹"></a>机器人模型文件储存 —— urdf文件夹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> fishbot_description &amp;&amp; <span class="built_in">mkdir</span> urdf <span class="comment">#urdf 用于存放机器人模型文件</span></span><br><span class="line"><span class="built_in">cd</span> urdf &amp;&amp; <span class="built_in">touch</span> first_robot.urdf <span class="comment">#创建 urdf 文件</span></span><br></pre></td></tr></table></figure>
<p>另外需要手动在vscode中安装 urdf 插件<br><img src="/images/ros_node/r-3.1.png" alt="urdf插件示意图" width="700" /></p>
<h3 id="编辑first-robot-urdf"><a href="#编辑first-robot-urdf" class="headerlink" title="编辑first_robot.urdf"></a>编辑first_robot.urdf</h3><details>
<summary> first_robot.urdf的内容 </summary>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;robot name=&quot;first&quot;&gt;</span><br><span class="line">    &lt;!-- 机器人的身体部分 --&gt;</span><br><span class="line">    &lt;link name=&quot;base_link&quot;&gt;</span><br><span class="line">        &lt;!-- 部件外观描述 --&gt;</span><br><span class="line">        &lt;visual&gt;</span><br><span class="line">            &lt;!-- 沿着自己几何中心的偏移和旋转量 --&gt;</span><br><span class="line">            &lt;origin xyz=&quot;0.0 0.0 0.0&quot; rpy=&quot;0.0 0.0 0.0&quot;/&gt;</span><br><span class="line">            &lt;!-- 几何形状 --&gt;</span><br><span class="line">            &lt;geometry&gt;</span><br><span class="line">            &lt;!-- 圆柱体 radius半径 0.10m length高度 0.12m --&gt;</span><br><span class="line">                &lt;cylinder radius=&quot;0.10&quot; length=&quot;0.12&quot;/&gt;</span><br><span class="line">            &lt;/geometry&gt;</span><br><span class="line">            &lt;!-- 材质颜色 --&gt;</span><br><span class="line">            &lt;material name=&quot;white&quot;&gt;</span><br><span class="line">       #requester: making request: turtlesim.srv.Spawn_Request(x=1.0, y=2.0, theta=0.0, name=&#x27;&#x27;)</span><br><span class="line">#</span><br><span class="line">#response:</span><br><span class="line">#turtlesim.srv.Spawn_Response(name=&#x27;turtle2&#x27;)         &lt;!-- 红绿蓝 透明度（0～1） --&gt;</span><br><span class="line">                &lt;color rgba=&quot;1.0 1.0 1.0 0.5&quot;/&gt;</span><br><span class="line">            &lt;/material&gt;</span><br><span class="line">        &lt;/visual&gt;</span><br><span class="line">    &lt;/link&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 机器人的IMU部件，惯性测量传感器 --&gt;</span><br><span class="line">    &lt;link name=&quot;imu_link&quot;&gt;</span><br><span class="line">        &lt;!-- 部件外观描述 --&gt;</span><br><span class="line">        &lt;visual&gt;</span><br><span class="line">            &lt;!-- 沿着自己几何中心的偏移和旋转量 --&gt;</span><br><span class="line">            &lt;origin xyz=&quot;0.0 0.0 0.0&quot; rpy=&quot;0.0 0.0 0.0&quot;/&gt;</span><br><span class="line">            &lt;!-- 几何形状 --&gt;</span><br><span class="line">            &lt;geometry&gt;</span><br><span class="line">                &lt;box size=&quot;0.02 0.02 0.02&quot;/&gt;</span><br><span class="line">            &lt;/geometry&gt;</span><br><span class="line">            &lt;!-- 材质颜色 --&gt;</span><br><span class="line">            &lt;material name=&quot;black&quot;&gt;</span><br><span class="line">                &lt;!-- 红绿蓝 透明度（0～1） --&gt;</span><br><span class="line">                &lt;color rgba=&quot;0.0 0.0 0.0 0.5&quot;/&gt;</span><br><span class="line">            &lt;/material&gt;</span><br><span class="line">        &lt;/visual&gt;</span><br><span class="line">    &lt;/link&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 机器人的关节，用于组合机器人的部件 --&gt;</span><br><span class="line">    &lt;joint name=&quot;imu_joint&quot; type=&quot;fixed&quot;&gt;</span><br><span class="line">        &lt;origin xyz=&quot;0.0 0.0 0.03&quot; rpy=&quot;0.0 0.0 0.0&quot;/&gt;</span><br><span class="line">        &lt;parent link=&quot;base_link&quot;/&gt;</span><br><span class="line">        &lt;child link=&quot;imu_link&quot;/&gt;</span><br><span class="line">    &lt;/joint&gt;</span><br><span class="line">&lt;/robot&gt;</span><br></pre></td></tr></table></figure>
</details>

<p><strong>打开集成终端</strong><br><img src="/images/ros_node/r-3.2.png" alt="打开集成终端" width="400" /><br>输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#urdf_to_graphviz生成可视化文件</span></span><br><span class="line">urdf_to_graphviz first_robot.urdf </span><br></pre></td></tr></table></figure>
<details>
<summary> 如果报错 </summary>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">WARNING: OUTPUT not given. This <span class="built_in">type</span> of usage is deprecated!Usage: urdf_to_graphviz input.xml [OUTPUT]  Will create either <span class="variable">$ROBOT_NAME</span>.gv &amp; <span class="variable">$ROBOT_NAME</span>.pdf <span class="keyword">in</span> CWD  or OUTPUT.gv &amp; OUTPUT.pdf.</span><br><span class="line">Error:   No <span class="built_in">link</span> elements found <span class="keyword">in</span> urdf file</span><br><span class="line">         at line 206 <span class="keyword">in</span> ./urdf_parser/src/model.cpp</span><br><span class="line">ERROR: Model Parsing the xml failed</span><br></pre></td></tr></table></figure>
则是urdf文件没有保存，ctrl+s 保存一下，如果你已经设置了vscode，这个错误基本不会发生
</details>

<h3 id="在RViz中查看模型"><a href="#在RViz中查看模型" class="headerlink" title="在RViz中查看模型"></a>在RViz中查看模型</h3><p>在集成终端中输入<code>rviz2</code></p>
<details>
<summary> 如果报错（简易方法） </summary>
如果rviz2发生渲染问题：如屏闪
Step1：更新显卡驱动（ai）
Step2：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export QT_ENABLE_HIGHDPI_SCALING=0&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export vblank_mode=0&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export QT_XCB_GL_INTEGRATION=xcb_glx&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line">rviz2</span><br></pre></td></tr></table></figure>
Step3：登录界面右下角齿轮选择`Ubuntu on Xorg`
再不行就ai 电脑型号 系统 情况 
</details>

<img src="/images/ros_node/r-6.png" alt="基础配置rviz2_1" width="700" />
----------------------------我是分割线-----------------------------
<img src="/images/ros_node/r-7.png" alt="基础配置rviz2_2" width="700" />
但是当前还是无法直接显示imu_link base_link之间的关系，原因是rviz2默认使用map，需要tf变换

<p><strong>So，</strong> 使用ROS2内置的publisher实现自动的关系转换<br><img src="/images/ros_node/r-8.png" alt="转换到rviz2的示意图" width="600" /><br>运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install ros-<span class="variable">$ROS_DISTRO</span>-joint-state-publisher</span><br><span class="line"><span class="built_in">sudo</span> apt install ros-<span class="variable">$ROS_DISTRO</span>-robot-state-publisher</span><br></pre></td></tr></table></figure>

<h3 id="编辑launch文件（方便运行-关闭多个节点）"><a href="#编辑launch文件（方便运行-关闭多个节点）" class="headerlink" title="编辑launch文件（方便运行&#x2F;关闭多个节点）"></a>编辑launch文件（方便运行&#x2F;关闭多个节点）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/fishros/CHAPT6</span><br><span class="line"><span class="built_in">mkdir</span> -p chapt6_ws/src/fishbot_description/launch</span><br><span class="line"><span class="built_in">touch</span> chapt6_ws/src/fishbot_description/launch/display_robot.launch.py</span><br></pre></td></tr></table></figure>

<details>
<summary> display_robot.launch.py的内容 </summary>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> launch</span><br><span class="line"><span class="keyword">import</span> launch_ros</span><br><span class="line"><span class="keyword">from</span> ament_index_python.packages <span class="keyword">import</span> get_package_share_directory</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_launch_description</span>():</span><br><span class="line">    <span class="comment">#获取默认的urdf路径,这个需要先colcon build 一下，并且在CMakeList中加上urdf与launch文件夹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> launch.LaunchDescription([</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    ])</span><br></pre></td></tr></table></figure>

<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#......</span><br><span class="line">#endif()</span><br><span class="line"></span><br><span class="line">#自己定位一下吧</span><br><span class="line">install(DIRECTORY launch urdf </span><br><span class="line">  DESTINATION share/$&#123;PROJECT_NAME&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ament_package()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</details>
        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Lyxy-szs</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://lyxy-szs.github.io/2026/02/02/ros2-note/">http://lyxy-szs.github.io/2026/02/02/ros2-note/</a></span>
                    </p>
                
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>永远相信<strong>美好的事情即将發生</strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/ROS2/"># ROS2</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2026/01/20/C++&note2/">C++/note2</a>
            
        </section>


    </article>
</div>

<!-- �����ڹؼ��ʶ�λ+�����߼� -->
<script>
// 1. ��URL�л�ȡ�ؼ��ʲ���
function getUrlParam(name) {
  const reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`);
  const r = window.location.search.substr(1).match(reg);
  if (r != null) return decodeURIComponent(r[2]);
  return null;
}

// 2. �������������ؼ���λ��
function highlightAndScrollToKeyword() {
  const keyword = getUrlParam('keyword');
  if (!keyword || keyword.length < 2) return; // �޹ؼ���/�ؼ��ʹ���������

  // ��λ������������Chic�����������ݵ�������������ȷ���Ƿ�ƥ�䣬Ĭ����.post-content��
  const contentEl = document.querySelector('.post-content');
  if (!contentEl) return;

  // ��¡���ݣ�����ֱ���޸�ԭDOM���µ�����
  const contentHtml = contentEl.innerHTML;
  // ����ƥ��ؼ��ʣ����Դ�Сд��ȫ��ƥ�䣩
  const reg = new RegExp(`(${keyword})`, 'gi');
  // �滻�ؼ��ʲ����Ӹ�����ʽ
  const newHtml = contentHtml.replace(reg, '<span style="background: #ffff00; color: #333; padding: 0 2px; border-radius: 2px;">$1</span>');
  contentEl.innerHTML = newHtml;

  // 3. ��������һ��ƥ��Ĺؼ���λ��
  const firstHighlight = contentEl.querySelector('span[style*="background: #ffff00"]');
  if (firstHighlight) {
    // ƽ���������ؼ���λ�ã�ƫ��-80px�����ⱻ�������ڵ���
    firstHighlight.scrollIntoView({
      behavior: 'smooth',
      block: 'center'
    });
    // ����һ������Ԫ��������˸Ч������ǿ�Ӿ���ʾ
    firstHighlight.animate([
      { opacity: 0.5 },
      { opacity: 1 }
    ], {
      duration: 1000,
      iterations: 2
    });
  }
}

// ҳ�������ɺ�ִ��
window.onload = function() {
  highlightAndScrollToKeyword();
};
</script>
            </div>
            <footer id="footer" class="footer">
    <div class="footer-typing-container">
        <span id="footer-typed-text"></span>
    </div>
    <div class="copyright">
        <span>© Lyxy-szs | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

<script>
    // 等待页面文档加载完毕
    document.addEventListener('DOMContentLoaded', function () {
        // 确保容器元素存在
        const typedElement = document.getElementById('footer-typed-text');
        if (typedElement) {
            var typed = new Typed('#footer-typed-text', {
                strings: [
                    "永远相信 美好的事情即将發生 临渊羡鱼shi",
                    "知识就是力量。 弗朗西斯·培根",  
                    "我思故我在。 勒内·笛卡尔",  
                    "人生苦短，及时行乐。 贺拉斯",  
                    "活着就是为了改变世界，难道还有其他原因吗？ 史蒂夫·乔布斯",  
                    "黑暗不能驱走黑暗，只有光可以做到；仇恨不能驱走仇恨，只有爱可以做到。 马丁·路德·金",  
                    "成功是从一个失败到另一个失败而不失去热情的能力。 温斯顿·丘吉尔",  
                    "教育不是填满一个桶，而是点燃一把火。 威廉·巴特勒·叶芝",  
                    "战争就是和平，自由就是奴役，无知就是力量。 乔治·奥威尔《一九八四》",  
                    "人是为了反抗而生的。 阿尔贝·加缪",  
                    "幸福取决于我们自己。 亚里士多德",  
                    "唯一值得我们恐惧的是恐惧本身。 富兰克林·D·罗斯福",  
                    "生命的意义在于给予。 列夫·托尔斯泰",  
                    "不要为小事烦恼，所有事都是小事。 理查德·卡尔森",  
                    "梦想不会通过魔法实现；它需要汗水、决心和努力。 科林·鲍威尔",  
                    "最好的报复是巨大的成功。 弗兰克·辛纳屈",  
                    "你只活一次，但如果你做得对，一次就足够了。 梅·韦斯特"
                ], // 字符串数组，会依次键入
                typeSpeed: 60,    // 打字速度，数值越小越快[citation:2]
                backSpeed: 40,    // 回退删除的速度[citation:2]
                backDelay: 1500,  // 一句打完后的暂停时间（毫秒）[citation:2]
                loop: true,       // 是否循环[citation:2]
                showCursor: true, // 是否显示闪烁光标[citation:4]
                cursorChar: '_'   // 自定义光标字符[citation:4]
            });
        }
    });
</script>
    </div>
    
    
<script src="/js/scrollbar.js"></script>

    
<script src="/js/typed.min.js"></script>

    
<script src="/js/tellu.js"></script>

<!-- hexo injector body_end start --><script src="https://fastly.jsdelivr.net/npm/hexo-tag-common@0.2.0/js/index.js"></script><!-- hexo injector body_end end --></body>

</html>