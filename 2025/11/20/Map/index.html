<!DOCTYPE html>
<html lang="zh-CN">

<head><!-- hexo injector head_begin start --><link href="https://fastly.jsdelivr.net/npm/hexo-tag-common@0.2.0/css/index.css" rel="stylesheet"/><!-- hexo injector head_begin end -->
    <script src="https://cdn.bootcss.com/typed.js/2.0.5/typed.js"></script>
    <!-- �ַ��������ӿ����� -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<!-- <meta name="robots" content="nosnippet"> -->

<!-- վ��Ԫ��Ϣ -->

    <meta name="author" content="Lyxy-szs">


    <meta name="subtitle" content="Shi">




<!-- ҳ����⶯̬���� -->

<title>Map | Johnson</title>

<!-- ��վͼ�� -->

    <link rel="icon" href="/2.ico">


<!-- �Զ���CSS�б������������ü��أ� -->

    
    <link rel="stylesheet" href="/css/style.css">
    


<!-- �Զ���JS�б������������ü��أ� -->

    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    
    <script src="/js/tellu.js"></script>
    
    <script src="/js/typed.min.js"></script>
    


<!-- MathJax��ʽ��Ⱦ֧�� -->

    

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const pagebody = document.getElementsByTagName('body')[0]

            function setTheme(status) {

                if (status === 'dark') {
                    window.sessionStorage.theme = 'dark'
                    pagebody.classList.add('dark');
                    pagebody.classList.remove('light');

                } else if (status === 'light') {
                    window.sessionStorage.theme = 'light'
                    pagebody.classList.add('light');
                    pagebody.classList.remove('dark');
                }
            };

            setTheme(window.sessionStorage.theme)
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Johnson&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                <a class="menu-item" href="/archives">文章</a>
                
                <a class="menu-item" href="/categories">类别</a>
                
                <a class="menu-item" href="/tags">标签</a>
                
                <a class="menu-item" href="/links">友链</a>
                
                <a class="menu-item" href="/games">游戏</a>
                
                <a class="menu-item" href="/downloads">下载</a>
                
                
                <!-- 桌面端搜索按钮 -->
                <button class="search-btn menu-item" style="
                    background: transparent; 
                    border: none; 
                    cursor: pointer; 
                    font-size: inherit; 
                    color: inherit;
                    padding: 0 10px;
                ">
                    搜索
                </button>

                <!-- 恢复默认主题切换结构 -->
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <!-- 恢复默认结构：&nbsp;改为空格 -->
                    <a href="/">Johnson&#39;s Blog</a><a id="mobile-toggle-theme">· Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">
                    <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M4.5 17.27q-.213 0-.356-.145T4 16.768t.144-.356t.356-.143h15q.213 0 .356.144q.144.144.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.144T4 11.999t.144-.356t.356-.143h15q.213 0 .356.144t.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.143Q4 7.443 4 7.23t.144-.356t.356-.143h15q.213 0 .356.144T20 7.23t-.144.356t-.356.144z"/></svg>
                    <svg class="close-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"/></svg>
                </div>
            </div>
            <div class="menu" id="mobile-menu">
                
                <a class="menu-item" href="/archives">文章</a>
                
                <a class="menu-item" href="/categories">类别</a>
                
                <a class="menu-item" href="/tags">标签</a>
                
                <a class="menu-item" href="/links">友链</a>
                
                <a class="menu-item" href="/games">游戏</a>
                
                <a class="menu-item" href="/downloads">下载</a>
                

                <!-- 移动端搜索按钮 -->
                <button class="search-btn menu-item" style="
                    background: transparent; 
                    border: none; 
                    cursor: pointer; 
                    font-size: inherit; 
                    color: inherit;
                ">
                    搜索
                </button>
            </div>
        </div>
    </nav>

</header>

<div id="searchModal" style="
    display: none; 
    position: fixed; 
    top: 20%; 
    left: 50%; 
    transform: translateX(-50%); 
    background: transparent; 
    backdrop-filter: blur(8px); 
    -webkit-backdrop-filter: blur(8px); 
    padding: 20px; 
    border-radius: 12px; 
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15); 
    z-index: 9999; 
    width: 80%; 
    max-width: 500px;
    border: 1px solid rgba(255, 255, 255, 0.1);
">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h3 id="searchTitle" style="margin: 0; font-size: 16px;">搜索文章</h3>
        <span class="search-close" style="cursor: pointer; font-size: 20px;">&times;</span>
    </div>
    <input type="text" id="searchInput" placeholder="输入关键词搜索..." style="
        width: 100%; 
        padding: 12px; 
        border: 1px solid #eee; 
        border-radius: 8px; 
        font-size: 14px;
        outline: none;
        box-sizing: border-box;
    ">
    <ul id="searchResult" style="list-style: none; padding: 0; margin-top: 15px; max-height: 300px; overflow-y: auto;"></ul>
</div>

<!-- 主题适配样式（优化搜索结果上下文和输入框样式） -->
<!-- 主题适配样式（优化搜索结果上下文和输入框样式） -->
<style>
    /* 白主题样式 - 搜索框和文字 */
    #searchTitle,
    #searchInput {
        color: #333 !important;
    }
    .search-close {
        color: #999 !important;
    }
    #searchInput {
        background: rgba(255, 255, 255, 0.85) !important;
        border-color: #ddd !important;
        color: #333 !important;
    }
    #searchResult li {
        border-bottom: 1px dashed #eee !important;
    }
    #searchInput::placeholder {
        color: #999 !important;
    }

    /* 搜索结果链接（文章名）样式 */
    #searchResult a {
        text-decoration: none;
        font-weight: 500;
        display: block;
        color: #333; /* 白主题下的文章名颜色 */
    }
    
    body.dark #searchResult a {
        color: #fff; /* 深色主题下的文章名颜色 */
    }

    /* 黑主题样式 - 搜索框和文字 */
    body.dark #searchTitle,
    body.dark #searchInput {
        color: #fff !important;
    }
    body.dark .search-close {
        color: #ccc !important;
    }
    body.dark #searchInput {
        background: rgba(50, 50, 50, 0.85) !important;
        border-color: #666 !important;
        color: #fff !important;
    }
    body.dark #searchResult li {
        border-bottom: 1px dashed #555 !important;
    }
    body.dark #searchInput::placeholder {
        color: #aaa !important;
    }

    /* 修改：搜索结果上下文样式 - 使用与文章名相同的颜色 */
    .search-context {
        display: block;
        font-size: 13px;
        margin-top: 6px;
        line-height: 1.5;
        height: 39px;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        word-break: break-all;
        color: #333; /* 默认使用与文章名相同的浅色主题颜色 */
    }
    
    /* 深色主题下上下文使用与文章名相同的颜色 */
    body.dark .search-context {
        color: #fff; /* 使用与深色主题文章名相同的颜色 */
    }
    
    /* 保留关键词高亮样式 */
    .search-context mark {
        background-color: rgba(255, 215, 0, 0.3);
        color: inherit; /* 继承父元素的颜色 */
        padding: 0 2px;
        border-radius: 2px;
        font-weight: bold;
    }
    
    /* 深色主题下的关键词高亮 */
    body.dark .search-context mark {
        background-color: rgba(255, 215, 0, 0.4);
        color: #fff; /* 深色主题下mark标签文字颜色 */
    }

    /* ========== 搜索结果滚动条主题适配 ========== */
    /* 1. 白主题滚动条（默认） */
    #searchResult {
        scrollbar-width: thin;
        scrollbar-color: #ccc #f5f5f5;
    }
    
    /* 滚动条整体宽度 */
    #searchResult::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }
    
    /* 滚动条轨道 */
    #searchResult::-webkit-scrollbar-track {
        background: #f5f5f5;
        border-radius: 3px;
    }
    
    /* 滚动条滑块 */
    #searchResult::-webkit-scrollbar-thumb {
        background: #ccc;
        border-radius: 3px;
    }
    
    /* 滑块hover状态 */
    #searchResult::-webkit-scrollbar-thumb:hover {
        background: #999;
    }

    /* 2. 黑主题滚动条 */
    body.dark #searchResult {
        scrollbar-width: thin;
        scrollbar-color: #666 #333;
    }
    
    body.dark #searchResult::-webkit-scrollbar-track {
        background: #333;
    }
    
    body.dark #searchResult::-webkit-scrollbar-thumb {
        background: #666;
    }
    
    body.dark #searchResult::-webkit-scrollbar-thumb:hover {
        background: #888;
    }

    /* 3. 搜索结果项目样式 */
    #searchResult li {
        padding: 12px 0;
        border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    
    body.dark #searchResult li {
        border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    
    /* 文章链接悬停效果 */
    #searchResult a:hover {
        text-decoration: underline;
    }
</style>

<!-- 引入jQuery和搜索逻辑JS -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
<script>
    // 移动菜单切换函数（保持不变）
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.classList.contains("active")) {
            toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        } else {
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }

    // 搜索功能逻辑（增加上下文提取功能）
    $(document).ready(function () {
        const $searchBtn = $('.search-btn');
        const $searchModal = $('#searchModal');
        const $searchInput = $('#searchInput');
        const $searchResult = $('#searchResult');

        // 显示/隐藏搜索框（保持不变）
        $searchBtn.click(function (e) {
            e.preventDefault();
            $searchModal.toggle();
            if ($searchModal.is(':visible')) {
                $searchInput.focus();
            } else {
                $searchInput.val('');
                $searchResult.empty();
            }
        });

        // 关闭搜索框（保持不变）
        $('.search-close').click(function () {
            $searchModal.hide();
            $searchInput.val('');
            $searchResult.empty();
        });

        // 点击外部关闭（保持不变）
        $(document).click(function (e) {
            if (
                !$searchModal.is(e.target) && 
                !$searchModal.has(e.target).length && 
                !$searchBtn.is(e.target)
            ) {
                $searchModal.hide();
                $searchInput.val('');
                $searchResult.empty();
            }
        });

        // 从文本中提取关键词上下文（优化版）
        function extractContext(text, keyword, maxLength = 150) {
            if (!text || !keyword) return '';
            
            // 将文本和关键词都转为小写进行匹配
            const lowerText = text.toLowerCase();
            const lowerKeyword = keyword.toLowerCase();
            
            // 查找关键词在文本中的位置
            const index = lowerText.indexOf(lowerKeyword);
            
            if (index === -1) {
                // 如果没有找到关键词，返回文本开头部分
                const shortText = text.substring(0, maxLength);
                return shortText + (text.length > maxLength ? '...' : '');
            }
            
            // 计算截取范围：关键词前后各取一半
            const start = Math.max(0, index - maxLength / 2);
            const end = Math.min(text.length, index + keyword.length + maxLength / 2);
            
            let context = text.substring(start, end);
            
            // 在开头和结尾添加省略号
            if (start > 0) context = '...' + context;
            if (end < text.length) context = context + '...';
            
            // 高亮关键词（保持原始大小写）
            const originalKeyword = text.substring(index, index + keyword.length);
            const regex = new RegExp(originalKeyword.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi');
            
            return context.replace(regex, match => `<mark>${match}</mark>`);
        }

        // 去除HTML标签，获取纯文本
        function stripHtml(html) {
            const tmp = document.createElement('div');
            tmp.innerHTML = html;
            return tmp.textContent || tmp.innerText || '';
        }

        // 关键词搜索（显示带上下文的搜索结果）
        $searchInput.on('input', function () {
            const searchText = $(this).val().trim().toLowerCase();
            $searchResult.empty();

            if (searchText.length < 2) return;

            $.get('/search.xml', function (xml) {
                let hasMatch = false;
                $(xml).find('entry').each(function () {
                    const $entry = $(this);
                    const title = $entry.find('title').text();
                    const link = $entry.find('url').text();
                    const rawContent = $entry.find('content').text();
                    const content = stripHtml(rawContent);
                    
                    // 搜索标题和内容
                    const titleMatch = title.toLowerCase().includes(searchText);
                    const contentMatch = content.toLowerCase().includes(searchText);
                    
                    if (titleMatch || contentMatch) {
                        // 提取上下文
                        let context = '';
                        if (contentMatch) {
                            context = extractContext(content, searchText, 150);
                        } else if (titleMatch) {
                            // 如果只是标题匹配，高亮标题中的关键词
                            const titleContext = title.replace(
                                new RegExp(searchText, 'gi'), 
                                match => `<mark>${match}</mark>`
                            );
                            context = `标题匹配: ${titleContext}`;
                        }
                        
                        $searchResult.append(`
                            <li>
                                <a href="${link}?keyword=${encodeURIComponent(searchText)}" target="_blank">
                                    ${title}
                                </a>
                                <span class="search-context">${context}</span>
                            </li>
                        `);
                        hasMatch = true;
                    }
                });

                if (!hasMatch) {
                    $searchResult.append(`
                        <li style="padding: 10px; text-align: center; color: #888;">
                            未找到包含"${searchText}"的文章
                        </li>
                    `);
                }
            }).fail(function () {
                $searchResult.append(`
                    <li style="padding: 10px; color: #f44336; text-align: center;">
                        搜索索引加载失败，请确保已生成search.xml
                    </li>
                `);
            });
        });
    });
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // 为 6 时展开所有
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">Map</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Lyxy-szs</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">十一月 20, 2025&nbsp;&nbsp;17:51:05</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/Cpp%E7%BC%96%E7%A8%8B/">Cpp编程</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="C-std-map-使用详细指南"><a href="#C-std-map-使用详细指南" class="headerlink" title="C++ std::map 使用详细指南"></a>C++ std::map 使用详细指南</h1><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-stdmap">什么是 std::map</a></li>
<li><a href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95">基本用法</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C">常用操作</a></li>
<li><a href="#%E9%81%8D%E5%8E%86-map">遍历 map</a></li>
<li><a href="#%E6%80%A7%E8%83%BD%E7%89%B9%E7%82%B9">性能特点</a></li>
<li><a href="#%E5%AE%9E%E9%99%85%E7%A4%BA%E4%BE%8B">实际示例</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">常见问题</a></li>
</ol>
<h2 id="什么是-std-map"><a href="#什么是-std-map" class="headerlink" title="什么是 std::map"></a>什么是 std::map</h2><p><code>std::map</code> 是 C++ 标准模板库(STL)中的一个关联容器，它存储键值对(key-value pairs)，并根据键自动排序。</p>
<p><strong>特点：</strong></p>
<ul>
<li>键是唯一的（不允许重复）</li>
<li>按键自动排序（默认升序）</li>
<li>基于红黑树实现</li>
<li>查找、插入、删除的时间复杂度：O(log n)</li>
</ul>
<h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><h3 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="声明和初始化"><a href="#声明和初始化" class="headerlink" title="声明和初始化"></a>声明和初始化</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本声明</span></span><br><span class="line">std::map&lt;std::string, <span class="type">int</span>&gt; studentScores;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化列表（C++11及以上）</span></span><br><span class="line">std::map&lt;std::string, <span class="type">int</span>&gt; studentScores = &#123;</span><br><span class="line">    &#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">90</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;Bob&quot;</span>, <span class="number">85</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;Charlie&quot;</span>, <span class="number">92</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 make_pair</span></span><br><span class="line">std::map&lt;<span class="type">int</span>, std::string&gt; idToName;</span><br><span class="line">idToName.<span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="number">1</span>, <span class="string">&quot;Alice&quot;</span>));</span><br><span class="line">idToName.<span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="number">2</span>, <span class="string">&quot;Bob&quot;</span>));</span><br></pre></td></tr></table></figure>

<h2 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h2><h3 id="插入元素"><a href="#插入元素" class="headerlink" title="插入元素"></a>插入元素</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;std::string, <span class="type">int</span>&gt; scores;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法1：使用 [] 运算符</span></span><br><span class="line">scores[<span class="string">&quot;Alice&quot;</span>] = <span class="number">95</span>;</span><br><span class="line">scores[<span class="string">&quot;Bob&quot;</span>] = <span class="number">87</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2：使用 insert 函数</span></span><br><span class="line">scores.<span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="string">&quot;Charlie&quot;</span>, <span class="number">92</span>));</span><br><span class="line">scores.<span class="built_in">insert</span>(&#123;<span class="string">&quot;David&quot;</span>, <span class="number">88</span>&#125;);  <span class="comment">// C++11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法3：使用 emplace（C++11，更高效）</span></span><br><span class="line">scores.<span class="built_in">emplace</span>(<span class="string">&quot;Eve&quot;</span>, <span class="number">91</span>);</span><br></pre></td></tr></table></figure>

<h3 id="访问元素"><a href="#访问元素" class="headerlink" title="访问元素"></a>访问元素</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;std::string, <span class="type">int</span>&gt; scores = &#123;&#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">95</span>&#125;, &#123;<span class="string">&quot;Bob&quot;</span>, <span class="number">87</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法1：使用 [] 运算符（如果键不存在会创建）</span></span><br><span class="line">std::cout &lt;&lt; scores[<span class="string">&quot;Alice&quot;</span>] &lt;&lt; std::endl;  <span class="comment">// 输出: 95</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2：使用 at() 函数（如果键不存在会抛出异常）</span></span><br><span class="line">std::cout &lt;&lt; scores.<span class="built_in">at</span>(<span class="string">&quot;Bob&quot;</span>) &lt;&lt; std::endl; <span class="comment">// 输出: 87</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法3：使用 find() 函数（安全的方式）</span></span><br><span class="line"><span class="keyword">auto</span> it = scores.<span class="built_in">find</span>(<span class="string">&quot;Charlie&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (it != scores.<span class="built_in">end</span>()) &#123;</span><br><span class="line">    std::cout &lt;&lt; it-&gt;second &lt;&lt; std::endl;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Not found&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改元素"><a href="#修改元素" class="headerlink" title="修改元素"></a>修改元素</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;std::string, <span class="type">int</span>&gt; scores = &#123;&#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">95</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接赋值修改</span></span><br><span class="line">scores[<span class="string">&quot;Alice&quot;</span>] = <span class="number">98</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过迭代器修改值（不能修改键）</span></span><br><span class="line"><span class="keyword">auto</span> it = scores.<span class="built_in">find</span>(<span class="string">&quot;Alice&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (it != scores.<span class="built_in">end</span>()) &#123;</span><br><span class="line">    it-&gt;second = <span class="number">100</span>;  <span class="comment">// 修改值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;std::string, <span class="type">int</span>&gt; scores = &#123;</span><br><span class="line">    &#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">95</span>&#125;, &#123;<span class="string">&quot;Bob&quot;</span>, <span class="number">87</span>&#125;, &#123;<span class="string">&quot;Charlie&quot;</span>, <span class="number">92</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法1：通过键删除</span></span><br><span class="line">scores.<span class="built_in">erase</span>(<span class="string">&quot;Bob&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2：通过迭代器删除</span></span><br><span class="line"><span class="keyword">auto</span> it = scores.<span class="built_in">find</span>(<span class="string">&quot;Charlie&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (it != scores.<span class="built_in">end</span>()) &#123;</span><br><span class="line">    scores.<span class="built_in">erase</span>(it);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法3：删除范围内的元素</span></span><br><span class="line">scores.<span class="built_in">erase</span>(scores.<span class="built_in">begin</span>(), std::<span class="built_in">next</span>(scores.<span class="built_in">begin</span>(), <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法4：清空所有元素</span></span><br><span class="line">scores.<span class="built_in">clear</span>();</span><br></pre></td></tr></table></figure>

<h3 id="查找和判断"><a href="#查找和判断" class="headerlink" title="查找和判断"></a>查找和判断</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;std::string, <span class="type">int</span>&gt; scores = &#123;&#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">95</span>&#125;, &#123;<span class="string">&quot;Bob&quot;</span>, <span class="number">87</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找元素</span></span><br><span class="line"><span class="keyword">auto</span> it = scores.<span class="built_in">find</span>(<span class="string">&quot;Alice&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (it != scores.<span class="built_in">end</span>()) &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Found: &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; -&gt; &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查元素是否存在（C++20）</span></span><br><span class="line"><span class="keyword">if</span> (scores.<span class="built_in">contains</span>(<span class="string">&quot;Alice&quot;</span>)) &#123;  <span class="comment">// C++20</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Alice exists&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计数（对于map，只能是0或1）</span></span><br><span class="line"><span class="keyword">if</span> (scores.<span class="built_in">count</span>(<span class="string">&quot;Bob&quot;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Bob exists&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查是否为空</span></span><br><span class="line"><span class="keyword">if</span> (scores.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Map is empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="遍历-map"><a href="#遍历-map" class="headerlink" title="遍历 map"></a>遍历 map</h2><h3 id="使用迭代器"><a href="#使用迭代器" class="headerlink" title="使用迭代器"></a>使用迭代器</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;std::string, <span class="type">int</span>&gt; scores = &#123;&#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">95</span>&#125;, &#123;<span class="string">&quot;Bob&quot;</span>, <span class="number">87</span>&#125;, &#123;<span class="string">&quot;Charlie&quot;</span>, <span class="number">92</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正向迭代器</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> it = scores.<span class="built_in">begin</span>(); it != scores.<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">    std::cout &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 反向迭代器</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> it = scores.<span class="built_in">rbegin</span>(); it != scores.<span class="built_in">rend</span>(); ++it) &#123;</span><br><span class="line">    std::cout &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用范围循环（C-11）"><a href="#使用范围循环（C-11）" class="headerlink" title="使用范围循环（C++11）"></a>使用范围循环（C++11）</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;std::string, <span class="type">int</span>&gt; scores = &#123;&#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">95</span>&#125;, &#123;<span class="string">&quot;Bob&quot;</span>, <span class="number">87</span>&#125;, &#123;<span class="string">&quot;Charlie&quot;</span>, <span class="number">92</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 值拷贝（不推荐用于大对象）</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; pair : scores) &#123;</span><br><span class="line">    std::cout &lt;&lt; pair.first &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; pair.second &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引用（推荐）</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; [key, value] : scores) &#123;  <span class="comment">// C++17 结构化绑定</span></span><br><span class="line">    std::cout &lt;&lt; key &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="容量信息"><a href="#容量信息" class="headerlink" title="容量信息"></a>容量信息</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;std::string, <span class="type">int</span>&gt; scores = &#123;&#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">95</span>&#125;, &#123;<span class="string">&quot;Bob&quot;</span>, <span class="number">87</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 元素数量</span></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Size: &quot;</span> &lt;&lt; scores.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 最大可能的大小</span></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Max size: &quot;</span> &lt;&lt; scores.<span class="built_in">max_size</span>() &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<h2 id="自定义比较函数"><a href="#自定义比较函数" class="headerlink" title="自定义比较函数"></a>自定义比较函数</h2><h3 id="自定义排序"><a href="#自定义排序" class="headerlink" title="自定义排序"></a>自定义排序</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按字符串长度排序</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">StringLengthComparator</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> std::string&amp; a, <span class="type">const</span> std::string&amp; b)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a.<span class="built_in">length</span>() &lt; b.<span class="built_in">length</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">std::map&lt;std::string, <span class="type">int</span>, StringLengthComparator&gt; scoresByLength;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 lambda 表达式（C++11）</span></span><br><span class="line"><span class="keyword">auto</span> comparator = [](<span class="type">const</span> std::string&amp; a, <span class="type">const</span> std::string&amp; b) &#123;</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">length</span>() &lt; b.<span class="built_in">length</span>();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">std::map&lt;std::string, <span class="type">int</span>, <span class="title">decltype</span><span class="params">(comparator)</span>&gt; <span class="title">scores</span><span class="params">(comparator)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="降序排列"><a href="#降序排列" class="headerlink" title="降序排列"></a>降序排列</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法1：使用 std::greater</span></span><br><span class="line">std::map&lt;<span class="type">int</span>, std::string, std::greater&lt;<span class="type">int</span>&gt;&gt; descendingMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2：自定义比较函数</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">DescendingComparator</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a &gt; b;  <span class="comment">// 降序</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">std::map&lt;<span class="type">int</span>, std::string, DescendingComparator&gt; customDescendingMap;</span><br></pre></td></tr></table></figure>

<h2 id="性能特点"><a href="#性能特点" class="headerlink" title="性能特点"></a>性能特点</h2><table>
<thead>
<tr>
<th>操作</th>
<th>时间复杂度</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>插入</td>
<td>O(log n)</td>
<td>基于红黑树</td>
</tr>
<tr>
<td>查找</td>
<td>O(log n)</td>
<td>基于红黑树</td>
</tr>
<tr>
<td>删除</td>
<td>O(log n)</td>
<td>基于红黑树</td>
</tr>
<tr>
<td>遍历</td>
<td>O(n)</td>
<td>顺序访问所有元素</td>
</tr>
<tr>
<td>空间</td>
<td>O(n)</td>
<td>存储所有键值对</td>
</tr>
</tbody></table>
<h2 id="实际示例"><a href="#实际示例" class="headerlink" title="实际示例"></a>实际示例</h2><h3 id="示例1：单词计数器"><a href="#示例1：单词计数器" class="headerlink" title="示例1：单词计数器"></a>示例1：单词计数器</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::map&lt;std::string, <span class="type">int</span>&gt; wordCount;</span><br><span class="line">    std::string word;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 读取单词并计数</span></span><br><span class="line">    <span class="keyword">while</span> (std::cin &gt;&gt; word) &#123;</span><br><span class="line">        ++wordCount[word];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 输出结果</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; [word, count] : wordCount) &#123;</span><br><span class="line">        std::cout &lt;&lt; word &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; count &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="示例2：学生成绩管理系统"><a href="#示例2：学生成绩管理系统" class="headerlink" title="示例2：学生成绩管理系统"></a>示例2：学生成绩管理系统</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StudentManager</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::map&lt;<span class="type">int</span>, std::string&gt; students;  <span class="comment">// 学号 -&gt; 姓名</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addStudent</span><span class="params">(<span class="type">int</span> id, <span class="type">const</span> std::string&amp; name)</span> </span>&#123;</span><br><span class="line">        students[id] = name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">removeStudent</span><span class="params">(<span class="type">int</span> id)</span> </span>&#123;</span><br><span class="line">        students.<span class="built_in">erase</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function">std::string <span class="title">findStudent</span><span class="params">(<span class="type">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> it = students.<span class="built_in">find</span>(id);</span><br><span class="line">        <span class="keyword">if</span> (it != students.<span class="built_in">end</span>()) &#123;</span><br><span class="line">            <span class="keyword">return</span> it-&gt;second;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Not found&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printAllStudents</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; [id, name] : students) &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;ID: &quot;</span> &lt;&lt; id &lt;&lt; <span class="string">&quot;, Name: &quot;</span> &lt;&lt; name &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    StudentManager manager;</span><br><span class="line">    </span><br><span class="line">    manager.<span class="built_in">addStudent</span>(<span class="number">1001</span>, <span class="string">&quot;Alice&quot;</span>);</span><br><span class="line">    manager.<span class="built_in">addStudent</span>(<span class="number">1002</span>, <span class="string">&quot;Bob&quot;</span>);</span><br><span class="line">    manager.<span class="built_in">addStudent</span>(<span class="number">1003</span>, <span class="string">&quot;Charlie&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;All students:&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    manager.<span class="built_in">printAllStudents</span>();</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;\nStudent with ID 1002: &quot;</span> &lt;&lt; manager.<span class="built_in">findStudent</span>(<span class="number">1002</span>) &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    manager.<span class="built_in">removeStudent</span>(<span class="number">1001</span>);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;\nAfter removing ID 1001:&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    manager.<span class="built_in">printAllStudents</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="1-键不存在时的行为"><a href="#1-键不存在时的行为" class="headerlink" title="1. 键不存在时的行为"></a>1. 键不存在时的行为</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;std::string, <span class="type">int</span>&gt; scores;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 [] 访问不存在的键会创建该键（值为默认构造）</span></span><br><span class="line"><span class="type">int</span> value = scores[<span class="string">&quot;Unknown&quot;</span>];  <span class="comment">// 创建键 &quot;Unknown&quot;，值为 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 at() 会抛出 std::out_of_range 异常</span></span><br><span class="line"><span class="comment">// int value = scores.at(&quot;Unknown&quot;);  // 抛出异常</span></span><br></pre></td></tr></table></figure>

<h3 id="2-迭代器失效"><a href="#2-迭代器失效" class="headerlink" title="2. 迭代器失效"></a>2. 迭代器失效</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;<span class="type">int</span>, std::string&gt; myMap = &#123;&#123;<span class="number">1</span>, <span class="string">&quot;one&quot;</span>&#125;, &#123;<span class="number">2</span>, <span class="string">&quot;two&quot;</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">auto</span> it = myMap.<span class="built_in">find</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除操作会使指向被删除元素的迭代器失效</span></span><br><span class="line">myMap.<span class="built_in">erase</span>(it);</span><br><span class="line"><span class="comment">// it 现在已失效，不能再使用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 但其他迭代器仍然有效</span></span><br></pre></td></tr></table></figure>

<h3 id="3-性能考虑"><a href="#3-性能考虑" class="headerlink" title="3. 性能考虑"></a>3. 性能考虑</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果不需要排序，考虑使用 std::unordered_map（哈希表）</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line">std::unordered_map&lt;std::string, <span class="type">int</span>&gt; hashMap;  <span class="comment">// 平均 O(1) 操作</span></span><br></pre></td></tr></table></figure>

<h3 id="4-自定义类型作为键"><a href="#4-自定义类型作为键" class="headerlink" title="4. 自定义类型作为键"></a>4. 自定义类型作为键</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 需要定义比较运算符</span></span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> Person&amp; other) <span class="type">const</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (name == other.name) &#123;</span><br><span class="line">            <span class="keyword">return</span> age &lt; other.age;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> name &lt; other.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">std::map&lt;Person, <span class="type">int</span>&gt; personScores;</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><code>std::map</code> 是 C++ 中非常有用的关联容器，适用于需要按键排序和快速查找的场景。掌握它的基本用法和特性，能够帮助你在编程中更高效地处理键值对数据。</p>
<p><strong>关键要点：</strong></p>
<ul>
<li>使用 <code>[]</code> 运算符进行插入和访问</li>
<li>使用 <code>find()</code> 进行安全查找</li>
<li>使用范围循环进行遍历</li>
<li>了解时间复杂度特征</li>
<li>根据需求选择合适的比较函数</li>
</ul>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Lyxy-szs</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://lyxy-szs.github.io/2025/11/20/Map/">http://lyxy-szs.github.io/2025/11/20/Map/</a></span>
                    </p>
                
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>永远相信<strong>美好的事情即将發生</strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/C/"># C++</a>
                    
                        <a href="/tags/map/"># map</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2025/11/27/Cpp-Faction/">Cpp-Faction</a>
            
            
            <a class="next" rel="next" href="/2025/11/20/string/">String</a>
            
        </section>


    </article>
</div>

<!-- �����ڹؼ��ʶ�λ+�����߼� -->
<script>
// 1. ��URL�л�ȡ�ؼ��ʲ���
function getUrlParam(name) {
  const reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`);
  const r = window.location.search.substr(1).match(reg);
  if (r != null) return decodeURIComponent(r[2]);
  return null;
}

// 2. �������������ؼ���λ��
function highlightAndScrollToKeyword() {
  const keyword = getUrlParam('keyword');
  if (!keyword || keyword.length < 2) return; // �޹ؼ���/�ؼ��ʹ���������

  // ��λ������������Chic�����������ݵ�������������ȷ���Ƿ�ƥ�䣬Ĭ����.post-content��
  const contentEl = document.querySelector('.post-content');
  if (!contentEl) return;

  // ��¡���ݣ�����ֱ���޸�ԭDOM���µ�����
  const contentHtml = contentEl.innerHTML;
  // ����ƥ��ؼ��ʣ����Դ�Сд��ȫ��ƥ�䣩
  const reg = new RegExp(`(${keyword})`, 'gi');
  // �滻�ؼ��ʲ����Ӹ�����ʽ
  const newHtml = contentHtml.replace(reg, '<span style="background: #ffff00; color: #333; padding: 0 2px; border-radius: 2px;">$1</span>');
  contentEl.innerHTML = newHtml;

  // 3. ��������һ��ƥ��Ĺؼ���λ��
  const firstHighlight = contentEl.querySelector('span[style*="background: #ffff00"]');
  if (firstHighlight) {
    // ƽ���������ؼ���λ�ã�ƫ��-80px�����ⱻ�������ڵ���
    firstHighlight.scrollIntoView({
      behavior: 'smooth',
      block: 'center'
    });
    // ����һ������Ԫ��������˸Ч������ǿ�Ӿ���ʾ
    firstHighlight.animate([
      { opacity: 0.5 },
      { opacity: 1 }
    ], {
      duration: 1000,
      iterations: 2
    });
  }
}

// ҳ�������ɺ�ִ��
window.onload = function() {
  highlightAndScrollToKeyword();
};
</script>
            </div>
            <footer id="footer" class="footer">
    <div class="footer-typing-container">
        <span id="footer-typed-text"></span>
    </div>
    <div class="copyright">
        <span>© Lyxy-szs | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

<script>
    // 等待页面文档加载完毕
    document.addEventListener('DOMContentLoaded', function () {
        // 确保容器元素存在
        const typedElement = document.getElementById('footer-typed-text');
        if (typedElement) {
            var typed = new Typed('#footer-typed-text', {
                strings: [
                    "永远相信 美好的事情即将發生 临渊羡鱼shi",
                    "知识就是力量。 弗朗西斯·培根",  
                    "我思故我在。 勒内·笛卡尔",  
                    "人生苦短，及时行乐。 贺拉斯",  
                    "活着就是为了改变世界，难道还有其他原因吗？ 史蒂夫·乔布斯",  
                    "黑暗不能驱走黑暗，只有光可以做到；仇恨不能驱走仇恨，只有爱可以做到。 马丁·路德·金",  
                    "成功是从一个失败到另一个失败而不失去热情的能力。 温斯顿·丘吉尔",  
                    "教育不是填满一个桶，而是点燃一把火。 威廉·巴特勒·叶芝",  
                    "战争就是和平，自由就是奴役，无知就是力量。 乔治·奥威尔《一九八四》",  
                    "人是为了反抗而生的。 阿尔贝·加缪",  
                    "幸福取决于我们自己。 亚里士多德",  
                    "唯一值得我们恐惧的是恐惧本身。 富兰克林·D·罗斯福",  
                    "生命的意义在于给予。 列夫·托尔斯泰",  
                    "不要为小事烦恼，所有事都是小事。 理查德·卡尔森",  
                    "梦想不会通过魔法实现；它需要汗水、决心和努力。 科林·鲍威尔",  
                    "最好的报复是巨大的成功。 弗兰克·辛纳屈",  
                    "你只活一次，但如果你做得对，一次就足够了。 梅·韦斯特"
                ], // 字符串数组，会依次键入
                typeSpeed: 60,    // 打字速度，数值越小越快[citation:2]
                backSpeed: 40,    // 回退删除的速度[citation:2]
                backDelay: 1500,  // 一句打完后的暂停时间（毫秒）[citation:2]
                loop: true,       // 是否循环[citation:2]
                showCursor: true, // 是否显示闪烁光标[citation:4]
                cursorChar: '_'   // 自定义光标字符[citation:4]
            });
        }
    });
</script>
    </div>
    
    
<script src="/js/typed.min.js"></script>

    
<script src="/js/tellu.js"></script>

<!-- hexo injector body_end start --><script src="https://fastly.jsdelivr.net/npm/hexo-tag-common@0.2.0/js/index.js"></script><!-- hexo injector body_end end --></body>

</html>